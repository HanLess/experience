### 不选择 next 原因

- 项目结构有硬性要求，改动太大

- 核心插件无人维护，对复杂项目支持的稳定性未知

- 无用功能过多，给予 koa 又封装一层，过于复杂

### 要求

- 项目改动小

- 前后端同构，既可以通过 ssr 方式使用，也可以降级，当做 spa 使用

### 改动内容

- client-entry / server-entry

- html

- css

- data

- 缓存

### 单机限流

### 强制降级

### 作为基础服务的能力

 - 维护各个项目的输出 bundle cdn 链接
 - 通过异步请求，基础服务拿到调用方的名字、路径等参数，根据参数选择 bundle 进行渲染
 - 基础服务可以开放给 node 层或者纯前端项目
 - 对于纯前端项目，有两种调用方法，第一可以作为一个异步服务，在各个 js 加载执行的同时获得 html 并放入页面；也可以把基础服务作为统一的中间层，通过配置 nginx 进行转发，由基础服务返回页面内容
 - 对于需要登录的页面，可以把 token 当做参数传过来，在收集数据阶段放入 cookie 中




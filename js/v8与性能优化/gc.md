chrome 的目标是 60 fps，即每帧有 16.6ms 的时间来完成渲染，如果当前帧在 16.6ms 内完成了渲染任务，则会出现空闲时间

而 v8 的 gc 任务，就是在这些空闲时间完成的

### v8 的分代回收

分代回收
  
  - 年轻代分两个半空间，一个半空间满了后，进行一次清理，仍在使用的对象移动到另一个半空间，另一个半空间中仍在使用的对象，移动到老年代。年轻代的清理过程非常快，同常在 1ms 以内
  - 老年代的空间使用率达到一定值后，会进行标记-清除，gc主要的时间都花在这里，v8 为了提高性能，将 gc 任务分片，每个任务片在 5ms 以下
  - 标记后，由多个清除线程同时进程内存回收。
  - 最后，对不连续的内存碎片压缩处理，形成连续的内存空间。此任务非常耗时，仅在内存碎片成为问题时才执行。

总结

  - 年轻一代的清理工作通常很快
  - 由增量标记器执行的标记步骤，可以根据步长而任意延长
  - 完整的垃圾收集，可能需要很长时间
  - 内存压缩，这可能需要很长时间，但是会清理零碎的内存

如果老年代几乎已满，并且估计为任务提供的截止日期足够长以完成收集，则在空闲任务期间安排一次完整的垃圾收集。根据标记速度乘以分配的对象数，可以预测收集暂停时间。只有在网页闲置了相当长的时间后，才执行带有额外压缩的完全垃圾收集。
